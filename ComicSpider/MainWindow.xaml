<Window x:Class="ComicSpider.MainWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:ComicSpider="clr-namespace:ComicSpider"
		Title="Comic Spider" Height="600" Width="650"
		xmlns:tb="http://www.hardcodet.net/taskbar"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		Loaded="Window_Loaded"
		Closed="Window_Closed" Icon="/Comic%20Spider;component/Images/y.s.ico">
	<Window.Background>
		<ImageBrush ImageSource="pack://application:,,,/Comic Spider;component/Images/main_bg.jpg" Stretch="UniformToFill" TileMode="None" />
	</Window.Background>
	<Window.Resources>
		<DataTemplate x:Key="HeaderTemplateArrowUp">
			<DockPanel>
				<TextBlock HorizontalAlignment="Center" Text="{Binding}"/>
				<Path x:Name="arrow"
		   StrokeThickness = "1"					  
		   Fill            = "gray"
		   Data            = "M 5,10 L 15,10 L 10,5 L 5,10"/>
			</DockPanel>
		</DataTemplate>
		<DataTemplate x:Key="HeaderTemplateArrowDown">
			<DockPanel>
				<TextBlock HorizontalAlignment="Center" Text="{Binding }"/>
				<Path x:Name="arrow"
			  StrokeThickness = "1"					  
			  Fill            = "gray"
			  Data            = "M 5,5 L 10,10 L 15,5 L 5,5"/>
			</DockPanel>
		</DataTemplate>
		<ContextMenu x:Key="view_list_menu">
			<MenuItem Header="Open Url" Click="Open_url_Click" />
			<MenuItem Header="Open folder" Click="Open_folder_Click" />
			<MenuItem Header="Delete" Click="Delelte_list_item_Click" />
		</ContextMenu>
	</Window.Resources>
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition Height="175" />
			<RowDefinition Height="35" />
			<RowDefinition Height="251*" />
		</Grid.RowDefinitions>
		<tb:TaskbarIcon x:Name="tray" IconSource="/Comic%20Spider;component/Images/ys_16.ico" TrayLeftMouseDown="tray_TrayLeftMouseDown">
			<tb:TaskbarIcon.TrayToolTip>
				<Border Padding="10,5" CornerRadius="3" Panel.ZIndex="100" Opacity="0.9">
					<Border.Background>
						<ImageBrush ImageSource="pack://application:,,,/Comic Spider;component/Images/main_bg.jpg" Stretch="UniformToFill" TileMode="None" />
					</Border.Background>
					<Border.Effect>
						<DropShadowEffect Color="#FF4B4B4B" Direction="270" ShadowDepth="2" BlurRadius="5" Opacity="0.7"></DropShadowEffect>
					</Border.Effect>
					<StackPanel>
						<TextBlock Text="Comic Spider" />
						<TextBlock Text="{Binding ToolTipText}" />
					</StackPanel>
				</Border>
			</tb:TaskbarIcon.TrayToolTip>
			<tb:TaskbarIcon.ContextMenu>
				<ContextMenu>
					<MenuItem Header="Hide" Click="tray_TrayLeftMouseDown" IsCheckable="True"></MenuItem>
					<MenuItem Header="Close" Click="Close"></MenuItem>
				</ContextMenu>
			</tb:TaskbarIcon.ContextMenu>
		</tb:TaskbarIcon>
		<Grid Grid.Row="2">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="1.7*" />
				<ColumnDefinition Width="1*" />
			</Grid.ColumnDefinitions>
			<ListView Name="vol_list" ContextMenu="{StaticResource ResourceKey=view_list_menu}" Margin="5,5,0,5" SelectionChanged="vol_list_SelectionChanged" GridViewColumnHeader.Click="GridView_column_header_Clicked">
				<ListView.View>
					<GridView>
						<GridViewColumn Header="State" Width="50" DisplayMemberBinding="{Binding State}"></GridViewColumn>
						<GridViewColumn Header="Name" Width="300" DisplayMemberBinding="{Binding Name}"></GridViewColumn>
					</GridView>
				</ListView.View>
			</ListView>
			<GridSplitter HorizontalAlignment="Left" Name="gridSplitter1" Width="5" Grid.Column="1" Margin="0,5" Background="White" />
			<ListView Name="Page_list" ContextMenu="{StaticResource ResourceKey=view_list_menu}" Grid.Column="1" Margin="5" GridViewColumnHeader.Click="GridView_column_header_Clicked">
				<ListView.View>
					<GridView>
						<GridViewColumn Header="State" Width="50" DisplayMemberBinding="{Binding State}"></GridViewColumn>
						<GridViewColumn Header="Url" Width="130">
							<GridViewColumn.CellTemplate>
								<DataTemplate>
									<TextBlock Text="{Binding Url}" HorizontalAlignment="Right"></TextBlock>
								</DataTemplate>
							</GridViewColumn.CellTemplate>
						</GridViewColumn>
					</GridView>
				</ListView.View>
			</ListView>
		</Grid>
		<Grid Grid.ColumnSpan="3">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="90" />
				<ColumnDefinition Width="416*" />
				<ColumnDefinition Width="68" />
				<ColumnDefinition Width="64" />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition Height="36" />
				<RowDefinition Height="36" />
				<RowDefinition Height="36" />
				<RowDefinition Height="36" />
				<RowDefinition Height="36" />
			</Grid.RowDefinitions>

			<Label Margin="0,5" HorizontalContentAlignment="Right">Main url</Label>
			<TextBox x:Name="txt_main_url"  Margin="5" Grid.Column="1" />

			<Label Margin="0,5" Grid.Row="1" HorizontalContentAlignment="Right">Vol Pattern</Label>
			<TextBox x:Name="txt_vol" Grid.Row="1" Margin="5" Grid.Column="1" />

			<Label Margin="0,5" Grid.Row="2" HorizontalContentAlignment="Right">Page Pattern</Label>
			<TextBox x:Name="txt_page" Grid.Row="2" Margin="5" Grid.Column="1" />

			<Label Margin="0,5" Grid.Row="3" HorizontalContentAlignment="Right">File Pattern</Label>
			<TextBox x:Name="txt_file" Grid.Row="3"  Margin="5" Grid.Column="1" />

			<Label Margin="0,5" Grid.Row="4" HorizontalContentAlignment="Right">Save to</Label>
			<TextBox x:Name="txt_dir" Margin="5" Grid.Row="4" Grid.Column="1" />

			<Label Grid.Column="2" Margin="0,5" HorizontalContentAlignment="Right" Content="Thread"></Label>
			<TextBox x:Name="txt_thread" Grid.Column="3" Margin="5" MaxLength="3" HorizontalContentAlignment="Center" PreviewTextInput="Thread_PreviewTextInput">1</TextBox>

			<Label Grid.Row="1" Grid.Column="2" Margin="0,5" HorizontalContentAlignment="Right" Content="Threshold"></Label>
			<TextBox x:Name="txt_threshold_vol" Grid.Row="1" Grid.Column="3" Margin="5" MaxLength="3" HorizontalContentAlignment="Center" PreviewTextInput="Thread_PreviewTextInput">10</TextBox>

			<Label Grid.Row="2" Grid.Column="2" Margin="0,5" HorizontalContentAlignment="Right" Content="Threshold"></Label>
			<TextBox x:Name="txt_threshold_page" Grid.Row="2" Grid.Column="3" Margin="5" MaxLength="3" HorizontalContentAlignment="Center" PreviewTextInput="Thread_PreviewTextInput">10</TextBox>

			<Label Grid.Row="3" Grid.Column="2" Margin="0,5" HorizontalContentAlignment="Right" Content="Threshold"></Label>
			<TextBox x:Name="txt_threshold_file" Grid.Row="3" Grid.Column="3" Margin="5" MaxLength="3" HorizontalContentAlignment="Center" PreviewTextInput="Thread_PreviewTextInput">20</TextBox>
		</Grid>
		<StackPanel Orientation="Horizontal" Grid.Row="1">
			<Button Content="Start" Name="btn_start" Click="btn_start_Click" IsEnabled="False" Margin="5" Padding="5,0" />
			<Button Content="Get List" Name="btn_get_list" Click="btn_get_list_Click" Margin="5" Padding="5,0" />
			<Button Content="Select downloaded" Name="btn_select_downloaded" Margin="5" Padding="5,0" Click="btn_select_downloaded_Click" />
		</StackPanel>
	</Grid>
</Window>
