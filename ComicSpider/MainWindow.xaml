<Window x:Class="ComicSpider.MainWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:ComicSpider="clr-namespace:ComicSpider"
		Title="Comic Spider" Height="500" Width="650"
		xmlns:tb="http://www.hardcodet.net/taskbar"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		Loaded="Window_Loaded"
		Closed="Window_Closed" Icon="/Comic%20Spider;component/Images/y.s.ico">
	<Window.Background>
		<ImageBrush ImageSource="pack://application:,,,/Comic Spider;component/Images/main_bg.jpg" Stretch="UniformToFill" TileMode="None" />
	</Window.Background>
	<Window.Resources>
		<DataTemplate x:Key="HeaderTemplateArrowUp">
			<DockPanel>
				<TextBlock HorizontalAlignment="Center" Text="{Binding}"/>
				<Path x:Name="arrow"
		   StrokeThickness = "1"					  
		   Fill            = "gray"
		   Data            = "M 5,10 L 15,10 L 10,5 L 5,10"/>
			</DockPanel>
		</DataTemplate>
		<DataTemplate x:Key="HeaderTemplateArrowDown">
			<DockPanel>
				<TextBlock HorizontalAlignment="Center" Text="{Binding }"/>
				<Path x:Name="arrow"
			  StrokeThickness = "1"					  
			  Fill            = "gray"
			  Data            = "M 5,5 L 10,10 L 15,5 L 5,5"/>
			</DockPanel>
		</DataTemplate>
		<ContextMenu x:Key="view_list_menu">
			<MenuItem Header="Copy Name" Click="Copy_name_Click" />
			<MenuItem Header="Copy Url" Click="Copy_url_Click" />
			<MenuItem Header="Open Url" Click="Open_url_Click" />
			<MenuItem Header="Open folder" Click="Open_folder_Click" />
			<MenuItem Header="Delete" Click="Delelte_list_item_Click" />
		</ContextMenu>
		<Storyboard x:Name="sb_working" x:Key="sb_working" RepeatBehavior="Forever">
			<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[2].(RotateTransform.Angle)" Storyboard.TargetName="img_working">
				<SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="180"/>
				<SplineDoubleKeyFrame KeyTime="0:0:1.4" Value="360" KeySpline="0.32,0.69,1,1"/>
			</DoubleAnimationUsingKeyFrames>
			<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="img_working">
				<SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="1.2"/>
				<SplineDoubleKeyFrame KeyTime="0:0:1.4" Value="1" KeySpline="0.32,0.69,1,1"/>
			</DoubleAnimationUsingKeyFrames>
			<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="img_working">
				<SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="1.2"/>
				<SplineDoubleKeyFrame KeyTime="0:0:1.4" Value="1" KeySpline="0.32,0.69,1,1"/>
			</DoubleAnimationUsingKeyFrames>
		</Storyboard>
		<Storyboard x:Key="sb_show_working">
			<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="img_working">
				<SplineDoubleKeyFrame KeyTime="0:0:0.4" Value="1"/>
			</DoubleAnimationUsingKeyFrames>
		</Storyboard>
		<Storyboard x:Key="sb_hide_working">
			<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="img_working">
				<SplineDoubleKeyFrame KeyTime="0:0:0.4" Value="0"/>
			</DoubleAnimationUsingKeyFrames>
		</Storyboard>
	</Window.Resources>
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition Height="67" />
			<RowDefinition Height="36" />
			<RowDefinition Height="458*" />
		</Grid.RowDefinitions>
		<tb:TaskbarIcon x:Name="tray" IconSource="/Comic%20Spider;component/Images/ys_16.ico" TrayLeftMouseDown="tray_TrayLeftMouseDown" TrayToolTipOpen="tray_TrayToolTipOpen">
			<tb:TaskbarIcon.TrayToolTip>
				<Border Padding="10,5" CornerRadius="3" Panel.ZIndex="100" Opacity="0.9">
					<Border.Background>
						<ImageBrush ImageSource="pack://application:,,,/Comic Spider;component/Images/main_bg.jpg" Stretch="UniformToFill" TileMode="None" />
					</Border.Background>
					<Border.Effect>
						<DropShadowEffect Color="#FF4B4B4B" Direction="270" ShadowDepth="2" BlurRadius="5" Opacity="0.7"></DropShadowEffect>
					</Border.Effect>
					<StackPanel>
						<StackPanel Orientation="Horizontal">
							<TextBlock Text="Comic Spider" Margin="5" Foreground="Black" FontSize="16" />
							<TextBlock Text="Download volume: " Foreground="Black" Margin="5" VerticalAlignment="Bottom" />
							<TextBlock x:Name="txt_main_progress" Text="10/90" Margin="0,5,5,5" Foreground="Black" FontWeight="Bold" VerticalAlignment="Bottom" />
						</StackPanel>
						<TextBox x:Name="txt_console" Text="12345 asil 111111111111" Margin="5" Foreground="#FF405493" Background="{x:Null}" IsReadOnly="True" MaxLines="30" MinLines="1" BorderBrush="{x:Null}" FontFamily="Courier New" />
					</StackPanel>
				</Border>
			</tb:TaskbarIcon.TrayToolTip>
		</tb:TaskbarIcon>
		<Grid Grid.Row="2">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="1.7*" />
				<ColumnDefinition Width="1*" />
			</Grid.ColumnDefinitions>
			<ListView Name="volume_list" ContextMenu="{StaticResource ResourceKey=view_list_menu}" Margin="5,5,0,5" SelectionChanged="volume_list_SelectionChanged" GridViewColumnHeader.Click="GridView_column_header_Clicked" KeyUp="Delelte_list_item_KeyUp" MouseDown="volume_list_MouseDown">
				<ListView.View>
					<GridView>
						<GridViewColumn Header="State" Width="50" DisplayMemberBinding="{Binding State}"></GridViewColumn>
						<GridViewColumn Header="Name" Width="300" DisplayMemberBinding="{Binding Name}"></GridViewColumn>
					</GridView>
				</ListView.View>
			</ListView>
			<GridSplitter HorizontalAlignment="Left" Name="gridSplitter1" Width="5" Grid.Column="1" Margin="0,5" Background="White" />
			<ListView Name="Page_list" ContextMenu="{StaticResource ResourceKey=view_list_menu}" Grid.Column="1" Margin="5" GridViewColumnHeader.Click="GridView_column_header_Clicked" KeyUp="Delelte_list_item_KeyUp">
				<ListView.View>
					<GridView>
						<GridViewColumn Header="State" Width="50" DisplayMemberBinding="{Binding State}"></GridViewColumn>
						<GridViewColumn Header="Url" Width="130">
							<GridViewColumn.CellTemplate>
								<DataTemplate>
									<TextBlock Text="{Binding Url}" HorizontalAlignment="Right"></TextBlock>
								</DataTemplate>
							</GridViewColumn.CellTemplate>
						</GridViewColumn>
					</GridView>
				</ListView.View>
			</ListView>
		</Grid>
		<Grid Grid.ColumnSpan="3">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="65" />
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="50" />
				<ColumnDefinition Width="60" />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition Height="36" />
				<RowDefinition Height="36" />
			</Grid.RowDefinitions>

			<Label Margin="0,5" HorizontalContentAlignment="Right">Main url</Label>
			<TextBox x:Name="txt_main_url"  Margin="5" Grid.Column="1" />
			<Label Margin="0,5" Grid.Row="1" HorizontalContentAlignment="Right">Save to</Label>
			<TextBox x:Name="txt_dir" Margin="5" Grid.Row="1" Grid.Column="1" />

			<Label Grid.Column="2" Margin="0,5" HorizontalContentAlignment="Right" Content="Thread"></Label>
			<TextBox x:Name="txt_thread" Grid.Column="3" Margin="5" MaxLength="3" HorizontalContentAlignment="Center" PreviewTextInput="Thread_PreviewTextInput">5</TextBox>
		</Grid>
		<StackPanel Orientation="Horizontal" Grid.Row="1">
			<Button Content="Start" Name="btn_start" Click="btn_start_Click" IsEnabled="False" Margin="5" Padding="5,0" />
			<Button Content="Get List" Name="btn_get_list" Click="btn_get_list_Click" Margin="5" Padding="5,0" />
			<Button Content="Select downloaded" Name="btn_select_downloaded" Margin="5" Padding="5,0" Click="btn_select_downloaded_Click" />
		</StackPanel>
		<Image x:Name="img_working" Margin="265,0,269,26" Grid.Row="2" Source="Images/running.png" Stretch="Fill" RenderTransformOrigin="0.5,0.5" Opacity="0" Height="100" VerticalAlignment="Bottom">
			<Image.RenderTransform>
				<TransformGroup>
					<ScaleTransform/>
					<SkewTransform/>
					<RotateTransform/>
					<TranslateTransform/>
				</TransformGroup>
			</Image.RenderTransform>
		</Image>
	</Grid>
</Window>
